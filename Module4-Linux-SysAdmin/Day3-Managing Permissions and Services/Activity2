Activity File: Managing Services
In this activity, you will continue with an audit of the services running on the server.
Your senior administrator wants you to audit the services and shut down insecure and/or unused services. They have provided a list of services to check.
You will check for these services and shut down and remove any that you find running on the server.
Instructions
Your senior administrator provided the following notes:
Some of our systems may have old services running that are no longer used. Because services can be exploited, we want to run as few of them as possible. The services we should check for are the following:
File Transfer Protocol (FTP): This file-sharing service is outdated, insecure, and easily exploitable. Cybercriminals often use it to upload malicious files, so we need it removed immediately.
Telnet: We used to use Telnet to get a shell on this server from a remote computer. This allowed us to easily reconfigure the server while not being in the office. Unfortunately, Telnet is notoriously insecure and easily hacked. Remove it so no one can log in to this machine remotely.
HTTP: HTTP is used to send files over the internet and host websites. This server is not supposed to be hosting websites, so stop and remove this service.
Bonus—IMAP and/or POP3: These services are used to send and receive emails. This server should not be managing emails, so stop and remove these services.
Bonus—Network Information Service: This is an old service that provides information about the entire network. Attackers often use this to gather information about this server and other machines on the network, which they can use to break in more easily. Stop and remove this service to prevent attackers from doing so.
To check for the above services, make sure none of these is running:
vsftpd.service (FTP)
apache2.service (HTTP)
nginx.service (HTTP)
Bonus: xinetd.service (Telnet)
Bonus: dovecot.service (IMAP or POP3)
For any listed services that you find on the system, complete the following:
Stop the service.
Verify that the service is stopped.
Disable the service. (:warning: Do not disable apache2 or nginx. They will be needed for a later activity.)
Remove the service from the system. (Take note of the commands to remove these services, but do not actually remove them. We will use them again for the next activity.)
Hint: Dovecot comes in two packages: dovecot-imapd and dovecot-pop3d. You'll need to remove both to successfully uninstall this service.



Steps to Audit and Manage the Services:
1. Check if a Service is Running:
To check if a service is running, use the systemctl command:

bash
Copy code
sudo systemctl status service_name
For example:

bash
Copy code
sudo systemctl status vsftpd.service
2. Stop the Service:
If a service is running, stop it with:

bash
Copy code
sudo systemctl stop service_name
For example:

bash
Copy code
sudo systemctl stop vsftpd.service
3. Verify the Service is Stopped:
To ensure the service is stopped, re-check its status:

bash
Copy code
sudo systemctl status service_name
You should see that it is inactive or stopped.

4. Disable the Service:
To prevent the service from starting on boot, disable it using:

bash
Copy code
sudo systemctl disable service_name
For example:

bash
Copy code
sudo systemctl disable vsftpd.service
Important: Do not disable apache2 or nginx, as they are needed for future activities.

5. Remove the Service (Optional for Future Use):
Since you're instructed not to remove the services for this task, take note of the commands to remove them, but do not execute them yet. The command to remove services can vary depending on the package manager in use. For Ubuntu, use:

bash
Copy code
sudo apt remove package_name
For example, to remove FTP:

bash
Copy code
sudo apt remove vsftpd
You would also use similar commands to remove other services but hold off on actually executing these for now.

Services to Audit:
FTP: vsftpd.service

Check: sudo systemctl status vsftpd.service
Stop: sudo systemctl stop vsftpd.service
Disable: sudo systemctl disable vsftpd.service
(Optional Remove: sudo apt remove vsftpd)
Telnet: xinetd.service

Check: sudo systemctl status xinetd.service
Stop: sudo systemctl stop xinetd.service
Disable: sudo systemctl disable xinetd.service
(Optional Remove: sudo apt remove xinetd)
HTTP: apache2.service or nginx.service

Check: sudo systemctl status apache2.service or nginx.service
Stop: sudo systemctl stop apache2.service or nginx.service
Disable: Do not disable these services for future activities.
(Optional Remove: sudo apt remove apache2 or nginx, but don’t remove them yet.)
IMAP/POP3: dovecot.service

Check: sudo systemctl status dovecot.service
Stop: sudo systemctl stop dovecot.service
Disable: sudo systemctl disable dovecot.service
(Optional Remove: sudo apt remove dovecot-imapd dovecot-pop3d)
Network Information Service (NIS): nis.service

Check: sudo systemctl status nis.service
Stop: sudo systemctl stop nis.service
Disable: sudo systemctl disable nis.service
(Optional Remove: sudo apt remove nis)
Summary:
For each service, you are auditing, ensure that it is not running by stopping and disabling it. You can note the removal command for later use but do not execute it unless specifically required in future tasks.